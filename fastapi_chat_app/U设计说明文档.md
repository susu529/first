# FastAPI Chat App · U 设计说明文档

## 设计基调与视觉规范

- **关键词**：甜美、温暖、陪伴感  
- **主色**：柔粉 `#FF9EBB`  
- **背景色**：极浅粉 `#FFF9FB`  
- **辅色**：浅粉 `#FFE6EF`、柔紫 `#6B5B6B`  
- **强调色**：爱心粉 `#FF7FA5`（按钮高亮与状态反馈）  
- **字体**：中文系统默认 + 英文字体 Inter，整体圆润细线条风格  
- **图标**：Font Awesome 4.7（与现有静态页保持一致）  
- **阴影与圆角**：组件使用轻微阴影与大圆角（16px~24px）营造柔和层次感  
- **动画节奏**：0.3s 内的渐隐、上浮、缩放过渡，强化聊天陪伴感而不干扰阅读

## 页面一：聊天页面

### 布局结构

- **顶部导航栏**：固定在页首，包含头像图标、助手名称「甜心助手」、状态文案。右侧保留搜索与更多操作入口。色块使用主色，圆角 24px，上投影增强悬浮感。
- **消息时间线（主内容区）**：垂直流式排列，分为助手消息、用户消息、系统提示三类。对话气泡采用圆角 20px，助手气泡使用浅粉背景，用户气泡用主色并反转文字。
- **底部输入栏**：包含快捷按钮（表情、附件）、多行自适应文本框与发送按钮。整体悬浮在页面底部，使用浅粉边框与阴影突出可交互性。
- **响应式策略**：在移动端保持单列布局；桌面端限定内容宽度 960px 并居中显示。

### 交互动效

- **消息出现动画**：新消息自下向上轻微浮现并渐显（0.3s）。  
- **输入指示器**：助手在响应前展示三个粉色圆点逐帧放大缩小的动画，用于占位与缓解等待感。  
- **按钮反馈**：悬停时轻微提亮并增加阴影，点击后快速恢复。

### 功能与 API 映射

- **发送按钮**  
  - 若使用 REST：点击后调用 `POST /api/chat/message`，请求体包含 `message` 与选定 `document_id`。  
  - 若使用 WebSocket：建立连接至 `/ws/chat/{document_id}`，发送 JSON 消息 `{ "type": "message", "content": "..." }`。  
  - 返回内容以流式形式追加到消息时间线；同时在消息底部展示关联片段列表（数据源为 REST 响应的 `relevant_chunks`）。  
- **文档选择器（顶部或输入栏内的下拉）**  
  - 初始化时调用 `GET /api/documents/` 获取可选文档，更新下拉选项。  
- **连接状态提示**  
  - WebSocket 成功连接与断开时分别显示轻量提示（绿色/灰色小标签），同时更新发送按钮可用状态。  
- **文件上传入口（如位于表情旁的附件按钮）**  
  - 点击后弹出上传对话框或跳转至文档管理页面，引导用户完成上传流程。

## 页面二：文档管理页面

### 布局结构

- **顶部抬头区**：延续主色条幅，展示页面标题「文档管理」与简要说明。  
- **上传面板**：位于内容区上部，使用浅粉卡片包裹文件选择与上传按钮，辅以说明文字。  
- **文档列表**：表格或卡片形式列出所有已上传文档，字段包含文件名、上传时间、文本块数量、状态操作。列表背景使用白色，条目之间采用浅粉分隔线。  
- **辅助信息**：在列表下方展示存储路径或剩余空间提示，采用次要文字颜色。

### 交互动效

- **上传反馈**：  
  - 拖拽进入上传区时高亮边框并显示「松开即可上传」提示。  
  - 上传成功后显示粉色勾勾气泡提示，失败则使用柔橙色警示。  
- **列表刷新**：上传或删除操作完成后淡入新的列表状态，保持顺滑过渡。  
- **操作按钮**：删除按钮悬停时颜色由浅粉转为主色，点击后弹出确认对话框。

### 功能与 API 映射

- **文档上传**  
  - 使用 `POST /api/documents/upload`，传递 `multipart/form-data` 的 txt 文件。  
  - 成功后根据响应数据更新列表（`document_id`、`chunks_count` 等），并提示可前往聊天页面开始对话。  
- **文档列表加载**  
  - 进入页面即调用 `GET /api/documents/`，填充表格内容。  
  - 支持手动刷新按钮，触发相同请求更新数据。  
- **删除操作**  
  - 列表中的删除按钮调用 `DELETE /api/documents/{document_id}`。  
  - 删除成功后从列表中移除对应条目，并清除聊天页面中对该文档的引用。  
- **跳转聊天**  
  - 每个条目提供「开始聊天」按钮，点击后携带 `document_id` 跳转至聊天页面并预选该文档。无需额外 API 调用，只更新前端状态。

## 统一体验建议

- 在两页面共享顶栏导航与颜色体系，保持品牌识别。  
- 通过全局状态管理（如文档列表缓存）减少重复请求，提高响应速度。  
- 错误处理统一采用柔和提示卡片，说明问题与下一步操作。  
- 适配浅色模式，可考虑后续扩展夜间模式。  
- 所有可交互元素保持 44px 以上点击区域，兼顾移动端体验。

本说明文档旨在指导前端落地视觉与交互，实现与后端 API 的平滑对接，确保聊天体验与文档管理流程一体化、甜美而清晰。

